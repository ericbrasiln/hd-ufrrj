---
title: "Coleta e organiza√ß√£o de dados"
subtitle: "Oficina 2 - Prof Eric Brasil"
date: today
lang: pt-br
date-format: full
format:
  revealjs: 
    theme: [default, custom.scss]
    slide-number: true
    highlight-style: nord
    incremental: false 
    chalkboard: 
      buttons: true
    preview-links: auto
    logo: https://omekas.im.ufrrj.br/files/original/aa99fe174fd6f97dd42ee78a359a46428b9997be.png
    footer: "IM-1256 - Introdu√ß√£o √† Hist√≥ria Digital | <a href=https://ericbrasil.com.br/hd-ufrrj/>Acesse o material da disciplina</a>"
---
## {.center}

![Eu, rob√¥?](imgs/block.png)

---

## Abund√¢ncia ou escassez? {.center}

- Plataformas digitais: 
    - cada vez mais dados digitais;
    - cada vez mais **fechadas ao acesso sistem√°tico**?  
- **APIs p√∫blicas inexistentes, restritas ou mal documentadas**.  
- LLMs geram medo com a coleta massiva de dados?
- Precisamos desenvolver **estrat√©gias pr√≥prias** para coletar, organizar e analisar dados.

---

## Objetivos da Oficina {.center}

- Refletir sobre **estrat√©gias de coleta** segundo o tipo de fonte.  
- Experimentar **ferramentas pr√°ticas** de coleta.
- Apresentar formas de **organizar dados** para an√°lise em Hist√≥ria Digital.  

---

## Exemplo 1: Instaloader ‚Äî coletando dados do Instagram {.center}

Link: [https://instaloader.github.io/](https://instaloader.github.io/)

**Pr√©-requisitos**

- Python + pip instalados (ver li√ß√µes do Programming Historian).  
  - [Instalando python](https://programminghistorian.org/pt/licoes/introducao-instalacao-python) 
  - [Instalando pip](https://programminghistorian.org/pt/licoes/instalacao-modulos-python-pip)

---

## Criar e ativar venv (Linux / macOS) {.center}

```bash
# criar venv
python3 -m venv .venv

# ativar (bash / zsh)
source .venv/bin/activate

# atualizar pip e instalar instaloader
pip install --upgrade pip
pip install instaloader
````

---

## Windows (PowerShell) {.center}

```powershell
# criar e ativar venv
python -m venv .venv
.\.venv\Scripts\Activate.ps1

# atualizar pip e instalar instaloader
python -m pip install --upgrade pip
python -m pip install instaloader
```

---

## Login ‚Äî iniciar sess√£o (faz o prompt de senha) {.center}

```bash
# faz login interativo (um modo seguro de autenticar)
instaloader --login=ericbrasiln
```

> Ao fazer login, o Instaloader mant√©m uma sess√£o local (cache) para evitar repetir autentica√ß√£o.

---

## Baixar um perfil inteiro (posts + metadados) {.center}

```bash
# baixa todas as publica√ß√µes do perfil <perfil>
instaloader profile <perfil>
```

---

## Contornando bloqueios de autentica√ß√£o usando cookies do navegador {.center}

1. Fa√ßa login no Instagram no navegador (Firefox ou LibreWolf).
2. Use a op√ß√£o `--load-cookies` do Instaloader (carrega cookies do Firefox):

```bash
# usar cookies do Firefox (nome do perfil do Firefox como par√¢metro)
instaloader --load-cookies Firefox profile <perfil>
```

---

## Op√ß√µes de coletqa ‚Äî posts, coment√°rios, reels e stories {.center}

```bash
instaloader --load-cookies Firefox profile <perfil>\
    --reels --comments :stories --fast-update
```

* `--reels` ‚Üí inclui Reels.
* `--comments` ‚Üí baixa coment√°rios.
* `:stories` ‚Üí baixa stories (quando dispon√≠veis).
* `--fast-update` ‚Üí baixa somente itens novos (mais r√°pido/incremental).

---

## Exemplo 2: coleta de v√≠deos com `yt-dlp` {.center}

Ferramenta poderosa para baixar v√≠deos e metadados de v√°rias plataformas, inclusive o YouTube.  
(Pode ser usada para playlists, canais inteiros ou apenas 1 v√≠deo).

---

## Instala√ß√£o

```bash
# Windows
pip install yt-dlp

# Linux (recomendado em venv)
python -m venv .venv
source .venv/bin/activate
pip install yt-dlp
```

---

## Baixando **um v√≠deo** de um perfil/canal {.center}

```bash
# Baixa apenas o primeiro v√≠deo do canal/perfil
yt-dlp --max-downloads 1 https://www.youtube.com/@NOME_DO_CANAL
```

---

## Baixando com **metadados completos**

```bash
# Salva v√≠deo + JSON com metadados
yt-dlp --max-downloads 3 -o "%(title)s.%(ext)s" -j --write-info-json https://www.youtube.com/@NOME_DO_CANAL
```

---

## Outras op√ß√µes √∫teis

* `--format bestvideo+bestaudio` ‚Üí pega melhor qualidade dispon√≠vel.
* `--skip-download` ‚Üí baixa **s√≥ metadados**.
* `--write-comments` ‚Üí baixa coment√°rios (quando suportado).
* `--playlist-items 1,3,5` ‚Üí escolhe v√≠deos espec√≠ficos de uma lista.

---

## Exemplo 3: Raspagem em Python {.center}

### **Ferramentas e scripts acad√™micos**

- `ferramentas_scielo_v2` ‚Üí coleta artigos e metadados do **SciELO**.  
- `resumos_anpuh_cli` ‚Üí coleta de **resumos de simp√≥sios tem√°ticos da ANPUH**.  
- `pyHDB` ‚Üí raspagem estruturada da **Hemeroteca Digital Brasileira**.  

---

## Exemplo: coleta SciELO com `ferramentas_scielo_v2` {.center}

Ferramenta desenvolvida pelo **LABHDUFBA** para raspagem sistem√°tica dos peri√≥dicos da SciELO.  

Permite coletar artigos por **√°rea de conhecimento** ou por **revista(s)** espec√≠ficas.

---

## Passo 1 ‚Äî Clonar o reposit√≥rio {.center}

```bash
git clone https://github.com/LABHDUFBA/ferramentas_scielo_v2.git
cd ferramentas_scielo_v2
````

---

## Passo 2 ‚Äî Criar ambiente virtual {.center}

```bash
# Linux/macOS
python3 -m venv .venv
source .venv/bin/activate

# Windows (PowerShell)
python -m venv .venv
.\.venv\Scripts\Activate.ps1
```

---

## Passo 3 ‚Äî Instalar depend√™ncias {.center}

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

---

## Passo 4 ‚Äî Raspagem por √°rea de conhecimento {.center}

```bash
python3 scielo_v2.py
```

O programa exibir√° as √°reas dispon√≠veis.

Digite o n√∫mero desejado (ex.: `5` para **Ci√™ncias Humanas**) e escolha:

1. baixar apenas XML
2. baixar XML + PDFs

---

## Novo recurso: filtro por ano {.center}

Agora √© poss√≠vel filtrar a coleta por **ano m√≠nimo de publica√ß√£o**.  

Durante a execu√ß√£o, o script perguntar√°:

```bash
-=- Defini√ß√£o de filtro por ano -=-
Deseja filtrar por ano m√≠nimo? (s/n): s
Filtrar edi√ß√µes a partir de qual ano? [2023]: 2025

```

No exemplo acima, apenas artigos publicados **a partir de 2025** ser√£o baixados.

---

## Passo 5 ‚Äî Raspagem por revista {.center}

```bash
python3 scielo_rev_v2.py
```

Informe a **abrevia√ß√£o** da revista, conforme aparece na URL do SciELO.
Exemplo: *Almanack* ‚Üí `https://www.scielo.br/j/alm/` ‚Üí abrevia√ß√£o: `alm`.

---

## Avisos importantes

* XMLs possuem **metadados completos** (texto integral + refer√™ncias).
* PDFs demandam muito tempo e espa√ßo (milhares de artigos).
* A raspagem cria pastas `scielo/{AAAA-MM-DD}/XML/` e `.../PDF/`.
* Em execu√ß√µes posteriores, s√≥ baixa arquivos novos (incremental).

---

## Exemplo 4: Registro da coleta {.center}

- **Registrar como, quando e de onde** os dados foram coletados.  
- Scripts em Python podem automatizar esse processo.  

üìé [Exemplo pr√°tico ‚Äì Hemeroteca Digital](https://ericbrasil.com.br/hemdig-framework/part3/capitulo7/sec71.html)

---

## Organiza√ß√£o dos dados {.center}

- **Metadados** ‚Üí quem, quando, onde, como.  
- **Formatos estruturados**: CSV, JSON, XML.  
- **Ferramentas de apoio**:  
  - Zotero (refer√™ncias)  
  - Planilhas (Excel, LibreOffice)  
  - Python / R (limpeza e an√°lise)  
  - Git/GitHub (versionamento e compartilhamento)  

---

## Para refletir {.center}

- Como equilibrar **√©tica, legalidade e necessidade de pesquisa**?  
- Quais fontes **podemos** e **n√£o podemos** coletar?  
- Como documentar a coleta para garantir **transpar√™ncia e reprodutibilidade**?

---

