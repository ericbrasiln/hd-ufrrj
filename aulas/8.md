---
title: "Oficina 3 ‚Äì OCR e NLP (com spaCy)"
subtitle: "IM-1256 ‚Äì Introdu√ß√£o √† Hist√≥ria Digital"
author: "Prof. Eric Brasil"
institute: "PPGIHD ‚Äì UFRRJ / IHL - UNILAB"
date: today
date-format: full
lang: pt-BR
format:
  revealjs:
    theme: [default, custom.scss]
    slide-number: true
    incremental: false
    chalkboard:
      buttons: true
      preview-links: auto
    logo: https://omekas.im.ufrrj.br/files/original/aa99fe174fd6f97dd42ee78a359a46428b9997be.png
    footer: "IM-1256 ‚Äì Introdu√ß√£o √† Hist√≥ria Digital | [ericbrasil.com.br/hd-ufrrj](https://ericbrasil.com.br/hd-ufrrj)"
---

## Acesse os slides da aula {.center}

::::{.center-image} 
![](imgs/qrc8.png) 
::::

---

## Estrutura da oficina {.center}

**Parte 1 ‚Äì OCR (Reconhecimento √ìptico de Caracteres)**  
- Impacto do OCR nas Humanidades Digitais  
- Uso de ferramentas gr√°ficas (gImageReader)  
- Tesseract OCR via linha de comando  

---

## Estrutura da oficina {.center}

**Parte 2 ‚Äì NLP (Processamento de Linguagem Natural)**  
- Conceitos e aplica√ß√µes em Hist√≥ria Digital  
- Prepara√ß√£o de dados textuais  
- Introdu√ß√£o ao spaCy (instala√ß√£o e comandos b√°sicos)  
- Extra√ß√£o de entidades nomeadas (NER) em portugu√™s  

---

## Objetivo Geral {.center}

Compreender e aplicar t√©cnicas b√°sicas de **Reconhecimento √ìptico de Caracteres (OCR)** e **Processamento de Linguagem Natural (NLP)** em contextos de pesquisa hist√≥rica, reconhecendo seus impactos metodol√≥gicos e epistemol√≥gicos nas Humanidades Digitais.

---

## Materiais da Oficina {.center}

üì¶ **Reposit√≥rios e Ferramentas**

- [gImageReader](https://github.com/manisandro/gImageReader)  
- [Tesseract OCR](https://github.com/tesseract-ocr/tesseract)  
- [spaCy](https://spacy.io/)  

---

## Materiais da Oficina {.center}

**Tutoriais**

- [Instalando gImageReader no Windows](https://youtu.be/_7eqj01Hn0M?si=nW_9p_3n38OHJtHX)
- [Workshop de gImageReader](https://youtu.be/ZomLnDje3BA?si=WoW-R6nEbd_Ra_pf)
- [Instalando Python no Windows 11](https://youtu.be/QPmIsKgdifI?si=UytlrpkuV49BmDZh)
- [Instalando o VS Code no Windows 11](https://youtu.be/VyY1xDSl6wU?si=_k3Gty6RJYl3Vzm3)
- [Corpus Analysis with spaCy - Programming Historian](https://programminghistorian.org/en/lessons/corpus-analysis-with-spacy)

---

# Parte 1: Reconhecimento √ìptico de Caracteres {.center}

---

## Pesquisa de refer√™ncia {.center}

Esta parte da oficina √© baseada na pesquisa de **p√≥s-doutorado de Eric Brasil**, desenvolvida entre **outubro de 2022 e outubro de 2023** no **Laborat√≥rio de Humanidades Digitais (Lab_HD)** do **Instituto de Hist√≥ria Contempor√¢nea (IHC/NOVA FCSH ‚Äì Universidade NOVA de Lisboa)**, sob supervis√£o do **Prof. Dr. Daniel Alves**.  

O projeto integrou o **IN2PAST ‚Äî Laborat√≥rio Associado para a Investiga√ß√£o e Inova√ß√£o em Patrim√≥nio, Artes, Sustentabilidade e Territ√≥rio**.

---

## O projeto HEMDIG(pt) {.center}

**HEMDIG(pt)** ‚Äî *M√©todos, ferramentas e hemerotecas digitais em portugu√™s*

O projeto analisa o processo de **selecionar, recolher e organizar fontes prim√°rias** em ambientes digitais e prop√µe um **framework metodol√≥gico** para pesquisas em hist√≥ria digital com peri√≥dicos.

üîó Acesse: [ericbrasil.com.br/hemdig-framework](https://ericbrasil.com.br/hemdig-framework)

---

## Fase 4 do HEMDIG(pt) {.center}

Essa etapa re√∫ne **documenta√ß√£o, testes e tutoriais** sobre ferramentas de OCR aplicadas a **jornais hist√≥ricos em l√≠ngua portuguesa**.

Avaliamos:

- **CLI (linha de comando)**: Tesseract, OCR-D, Kraken  
- **GUI (interface gr√°fica)**: gImageReader  
- Li√ß√µes do *Programming Historian* relacionadas ao tema

üîó [Acesse a Fase 4 ‚Äì OCR e OLR](https://ericbrasil.com.br/hemdig-framework/part4/part4-intro.html)


---

## O que √© OCR? {.center}

> **OCR (Optical Character Recognition)** √© a tecnologia que converte **imagens de texto** (digitaliza√ß√µes, fotos ou PDFs) em **texto edit√°vel e pesquis√°vel**.

Em termos simples:

- Traduz pixels ‚Üí caracteres.
- Permite transformar acervos digitalizados em **dados analis√°veis**.  

---

## OCR e as Humanidades Digitais {.center}

- Permite **acesso massivo** a fontes digitalizadas.  
- Facilita **buscas e an√°lises textuais** em larga escala.  
- Cria **corpora hist√≥ricos** para an√°lise automatizada.  
- Possibilita a **recupera√ß√£o de vozes e discursos** de jornais, cartas e manuscritos.  

---

## {.center}

> O OCR n√£o √© apenas uma etapa t√©cnica,  
> mas um **momento metodol√≥gico** da pesquisa digital.  
> Ele define o que √© vis√≠vel, pesquis√°vel e, portanto, **historicamente interpret√°vel**.

---

## Limites e desafios {.center}

O OCR **n√£o √© perfeito** ‚Äî especialmente com documentos hist√≥ricos.

Principais desafios:

- **Fontes antigas ou ornamentadas**  
- **Baixa qualidade da digitaliza√ß√£o**  
- **Papel amarelado e ru√≠do visual**  
- **Layout complexo** (colunas, an√∫ncios, tabelas)

---

## Limites e desafios {.center}

Solu√ß√£o parcial:

Combinar ferramentas autom√°ticas com **revis√£o humana e aprendizado de m√°quina** (modelos treinados em fontes hist√≥ricas).

---

## Ferramentas gr√°ficas: gImageReader {.center}

![](https://ericbrasil.com.br/hemdig-framework/_images/gimagereader.png)

Interface gr√°fica que usa o **Tesseract OCR**.  

- Selecionar √°reas espec√≠ficas do documento.  
- Aplicar filtros e pr√©-processamento.  
- Exportar resultados em TXT, PDF pesquis√°vel, HTML etc.  

---

## Tesseract OCR (CLI) {.center}

Ferramenta **livre e multiplataforma** mantida pelo Google.  
Suporta mais de **100 idiomas**, incluindo o portugu√™s.

Instala√ß√£o (Linux/Ubuntu):

```bash
sudo apt install tesseract-ocr tesseract-ocr-por
```

---

## Tesseract OCR (CLI) {.center}

üìÑ Uso b√°sico:

```bash
tesseract pagina1.png resultado -l por
```

Sa√≠da ‚Üí cria `resultado.txt` com o texto extra√≠do.

---

## Dicas para melhor OCR {.center}

**Pr√©-processamento da imagem**:

* Converter para tons de cinza (`convert img.jpg -colorspace Gray`)
* Aumentar contraste (`convert img.jpg -contrast`)
* Remover ru√≠dos com filtros autom√°ticos (ImageMagick, GIMP)

Quanto melhor a imagem, **melhor o OCR**.

---

# Parte 2: Processamento de Linguagem Natural {.center}

---

## O que √© NLP? {.center}

> **NLP (Natural Language Processing)** √© o campo da ci√™ncia computacional que busca ensinar m√°quinas a **ler, compreender e gerar linguagem humana**.

---

## Aplica√ß√µes comuns {.center}

- Tradu√ß√£o autom√°tica (Google Translate)  
- An√°lise de sentimentos  
- Assistentes de voz (Alexa, Siri, ChatGPT)  
- **Extra√ß√£o de informa√ß√£o hist√≥rica de textos digitalizados**

---

## NLP nas Humanidades Digitais {.center}

**Por que o NLP importa para historiadores?**

- Permite analisar **grandes volumes de texto** (jornais, cartas, relat√≥rios).  
- Facilita **descobrir padr√µes discursivos** e mudan√ßas sem√¢nticas ao longo do tempo.  
- Amplia a compreens√£o sobre **mem√≥ria, discurso e poder** em arquivos digitais.

üìö Termo-chave: **‚ÄúLeitura Distante‚Äù** (Franco Moretti)

---

## Fluxo de trabalho {.center}

1Ô∏è‚É£ OCR: converte imagens em texto  
2Ô∏è‚É£ **Pr√©-processamento textual** (limpeza, tokeniza√ß√£o)  
3Ô∏è‚É£ **An√°lise lingu√≠stica** (POS tagging, NER, depend√™ncias sint√°ticas)  
4Ô∏è‚É£ Interpreta√ß√£o e visualiza√ß√£o de resultados  

üìä Exemplo de pipeline:
```

Imagem (PDF) ‚Üí Texto OCR ‚Üí spaCy ‚Üí An√°lise ‚Üí Gr√°ficos

````

---

## spaCy {.center}

Biblioteca em Python projetada para **an√°lise lingu√≠stica robusta e r√°pida**.

- Tokeniza√ß√£o, lematiza√ß√£o, POS tagging  
- Reconhecimento de entidades nomeadas (NER)  
- An√°lise sint√°tica de depend√™ncias  
- Suporte a m√∫ltiplos idiomas (incluindo portugu√™s üáßüá∑)

---

## Instala√ß√£o {.center}

```bash
python3 -m venv venv
source venv/bin/activate
pip install spacy
python -m spacy download pt_core_news_lg
````

Verifique se o modelo foi instalado corretamente:

```bash
python -m spacy validate
```

---

## Exemplo b√°sico {.center}

```python
import spacy
nlp = spacy.load("pt_core_news_lg")

texto = "Em 15 de novembro de 1889, Deodoro da Fonseca proclamou a Rep√∫blica do Brasil no Rio de Janeiro."
doc = nlp(texto)

for token in doc:
    print(token.text, token.pos_, token.dep_)
```

---

## Exemplo b√°sico {.center}

üìÑ Sa√≠da esperada:

```
Em - ADP - case
15 - NUM - nummod
novembro - NOUN - obl
...
```

---

## Reconhecimento de Entidades Nomeadas (NER) {.center}

üéØ O NER permite extrair **nomes de pessoas, lugares, datas, institui√ß√µes** etc.

```python
for ent in doc.ents:
    print(ent.text, ent.label_)
```

---

## Reconhecimento de Entidades Nomeadas (NER) {.center}

üìã Sa√≠da:

```
15 de novembro de 1889  DATA
Deodoro da Fonseca       PESSOA
Rep√∫blica do Brasil      LOCAL
Rio de Janeiro           LOCAL
```

---

## Visualiza√ß√£o com displaCy {.center}

O spaCy possui um visualizador embutido para NER:

```python
from spacy import displacy
displacy.render(doc, style="ent", jupyter=True)
```

---

## Limpeza e prepara√ß√£o de dados {.center}

üßπ Antes da an√°lise, √© essencial:

* Remover caracteres especiais, HTML e stopwords
* Normalizar acentua√ß√£o e capitaliza√ß√£o
* Dividir o texto em par√°grafos ou senten√ßas coerentes

---

## Desafios para o portugu√™s {.center}

‚ö†Ô∏è NLP em portugu√™s enfrenta dificuldades espec√≠ficas:

* Ortografia antiga e varia√ß√µes regionais
* Palavras compostas e nomes pr√≥prios hist√≥ricos
* Escassez de modelos treinados com corpora hist√≥ricos

---

## Solu√ß√µes? {.center}

* Treinar modelos com *datasets* hist√≥ricos
* Combinar NLP + m√©todos qualitativos (leitura pr√≥xima)

---

## Discuss√£o {.center}

> Como o NLP pode transformar a forma como lemos o passado?

* Que riscos h√° em ‚Äúautomatizar‚Äù a leitura?
* O que se perde (ou ganha) ao delegar parte da an√°lise textual a modelos?
* Como equilibrar escalabilidade e interpreta√ß√£o cr√≠tica?
* Com o advento das IAs generativas (ex: ChatGPT), qual o futuro do NLP nas Humanidades Digitais?

